#include "AssetManager.hpp"
#include "ECSystem/Components.hpp"

AssetManager::AssetManager( Manager* mngr ) : manager( manager )
{}

AssetManager::~AssetManager()
{}

void AssetManager::createProjectile( Vector2D pos, Vector2D vel, int range, int speed, std::string id )
{
    auto& projectile( manager->addEntity() );
    projectile.addComponent< TransformComponent >( pos.getX(), pos.getY(), 32, 32, 1 );
    projectile.addComponent< SpriteComponent >( id, false );
    projectile.addComponent< ProjectileComponent >( range, speed, vel );
    projectile.addComponent< ColliderComponent >( "projectile" );
    projectile.addGroup( Game::groupProjectiles );

}

void AssetManager::addTexture( std::string id, const char *path )
{
    textures.emplace( id, TextureManager::LoadTexture( path ) );
}

SDL_Texture* AssetManager::getTexture( std::string id )
{
    return textures[id];
}
